create database abcdb;

use abcdb;

create table users
(
    user_id int auto_increment primary key,
    name varchar(100) not null,
    email varchar(100) not null unique,
    password varchar(20) not null,
    pic varchar(100)
);
create table products
(
    product_id int auto_increment primary key,
    name varchar(100) not null,
    price int not null ,
    quantity int not null,
    user_id int not null,
    constraint fk_products_users foreign key (user_id) references users(user_id)
);

create table pics(
    pic_id int auto_increment primary key,
    product_id int not null,
    path varchar(200) not null,
    constraint fk_pics_products foreign key (product_id) references products(product_id)
);

alter table users add column verification_code varchar(12);

create table status
(
    status_id int auto_increment primary key,
    name varchar(20) not null unique
);

insert into status (name) values ('Inactive'),('Active'),('Blocked'),('Closed');

alter table users add column status_id int not null,
add constraint fk_users_status foreign key (status_id) 
references status(status_id);

alter table users change column status_id status_id int not null default 1;

alter table users change column verification_code verification_code varchar(100);
